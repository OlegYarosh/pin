// Generated by CoffeeScript 1.4.0
(function() {

  jQuery(function() {
    var get_more_items;
    get_more_items = function(start) {
      var _this = this;
      $.getJSON('', {
        ajax: 1,
        'start': start
      }, function(data) {
        var html_text, pin, _i, _len;
        for (_i = 0, _len = data.length; _i < _len; _i++) {
          pin = data[_i];
          html_text = $.pin_template(pin);
          $('#category_column_' + $.column_control).append(html_text);
          if ($.column_control === 5) {
            $.column_control = 1;
          } else {
            $.column_control += 1;
          }
        }
      });
    };
    $(window).scroll(function() {
      var doc_height, height, sensitivity, top;
      top = $(window).scrollTop();
      height = $(window).innerHeight();
      doc_height = $(document).height();
      sensitivity = 600;
      if (top + height + sensitivity > doc_height) {
        get_more_items();
      }
    });
    $.pin_template = _.template($('#pin_template').html());
    $.column_control = 1;
    get_more_items(true);
  });

}).call(this);
