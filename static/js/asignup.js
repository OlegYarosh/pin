// Generated by CoffeeScript 1.4.0
(function() {
  var add_category_to_user, category_count, remove_category_from_user, show_cover;

  category_count = 0;

  $('.loldongs').on('click', function() {
    var category_id, original_div;
    category_id = $(this).attr('categoryid');
    original_div = $(this);
    add_category_to_user(category_id, $(this));
    return show_cover(original_div, category_id);
  });

  $('body').on('click', '.cover', function() {
    var category_id, original_div;
    category_id = $(this).attr('categoryid');
    original_div = $(this);
    remove_category_from_user(category_id, $(this));
    return original_div.remove();
  });

  show_cover = function(original_div, category_id) {
    var cover_div;
    $('body').append('<div class="cover" categoryid="' + category_id + '"></div>');
    cover_div = $('div.cover[categoryid="' + category_id + '"]');
    cover_div.offset(original_div.offset());
    cover_div.width(original_div.width() + 3);
    cover_div.height(original_div.height() + 3);
    cover_div.css("z-index", category_id);
    cover_div.css("visibility", "visible");
  };

  add_category_to_user = function(category_id, button) {
    $.ajax("/register/api/users/me/category/" + category_id + "/", {
      type: 'PUT',
      dataType: 'json'
    });
    button.addClass('selected');
    category_count += 1;
    if (category_count > 2) {
      return $('#continue_button').removeAttr('disabled');
    }
  };

  remove_category_from_user = function(category_id, button) {
    $.ajax("/register/api/users/me/category/" + category_id + "/", {
      type: 'DELETE',
      dataType: 'json'
    });
    button.removeClass('selected');
    category_count -= 1;
    if (category_count < 3) {
      return $('#continue_button').attr('disabled', 'disabled');
    }
  };

  $("#continue_button").click(function() {
    return window.location.href = 'after-signup/2';
  });

}).call(this);
