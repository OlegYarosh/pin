// Generated by CoffeeScript 1.4.0

jQuery(function() {
  $('#search_button').on('click', function(event) {
    var search_data;
    event.preventDefault();
    search_data = {
      'pin_url': $('#pin_url').val(),
      'username': $('#username').val(),
      'name': $('#name').val(),
      'email': $('#email').val(),
      'category': $('#category').val()
    };
    $.ajax({
      data: search_data,
      url: '/admin/pins/search/set_search_criteria',
      success: function() {
        $.pagination_grid.g.load();
      }
    });
  });
  $('.datagrid').on('click', '.edit-pin', function(event) {
    var pinid;
    event.preventDefault();
    event.stopPropagation();
    pinid = $(this).attr('pinid');
    window.location.href = '/admin/pin/' + pinid;
  });
  $('#select_all_pins').on('click', function(event) {
    return $.pagination_grid.g.selectAll();
  });
  $('#unselect_all_pins').on('click', function(event) {
    return $.pagination_grid.g.unSelectAll();
  });
  $('#delete_selected_pins').on('click', function(event) {
    var ids, x, _i, _len, _ref;
    if (!confirm('Do you really want to delete these items?')) {
      return;
    }
    ids = '';
    _ref = $.pagination_grid.g.getSelectedRows();
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      x = _ref[_i];
      if (ids !== '') {
        ids += ',';
      }
      ids += $(x).attr('pinid');
    }
    console.log(ids);
    $.ajax({
      method: 'post',
      url: '/admin/pins/multiple_delete',
      data: {
        'ids': ids
      },
      success: function() {
        $.pagination_grid.g.load();
      }
    });
  });
  $('#delete_pin_button').on('click', function(event) {
    var pinid;
    event.preventDefault();
    event.stopPropagation();
    pinid = $(this).attr('pinid');
    $.ajax({
      method: 'delete',
      success: function() {
        window.location.href = '/admin/pins/search';
      }
    });
  });
});
