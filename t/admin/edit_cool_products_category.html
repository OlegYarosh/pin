$def with (category, pins)
<div class="category">
	Category: <strong>$category.name</strong>
</div>
<div><button id="search_for_cool_pins_button" class="btn">Add a cool product</button></div>
<div id="pin_list" class="pins">
$for pin in pins:
	<div id="pin$pin.id" class="pin">
		<span>$pin.name</span>
		<span>$pin.description</span>
		<button id="remove_pin$pin.id" pin="$pin.id" class="btn remove">remove</button>
	</div>
</div>
<script language="javascript">
$$(document).ready(function (){
	$$( "#pin_list" ).on('click', '.remove', function () {
		var pin_id = $$( this ).attr('pin');
		remove_pin_from_category( pin_id );
	});
	
	function remove_pin_from_category( pin_id ) {
		$$.ajax({
			method: 'DELETE',
			url: '/admin/api/categories/$category.id/cool_pins/' + pin_id + '/'
		}).done(function( data ) {
			remove_from_pin_list( pin_id );
		});
	}
	
	function remove_from_pin_list( pin_id ) {
		console.log('remove');
		console.log("#pin" + pin_id);
		$$( "#pin" + pin_id ).remove();
	}

	function add_to_pin_list( pin ) {
		$$( "#pin_list" ).append('<div id="pin' + pin['id'] + '" class="pin">'
				+ '<span>' + pin['name'] + '</span>'
				+ '<span>' + pin['description'] + '</span>'
				+ '<button id="remove_pin' + pin['id'] + '" pin="' + pin['id'] + '" class="btn remove">remove</button>'
				+ '</div>');	
	}
	
	$$( "#search_dialog" ).dialog({autoOpen: false, minWidth: 500,
		position: { my: "center", at: "top", of: window }, modal: true});
	
	$$( "#search_for_cool_pins_button" ).click( function() {
		$$( "#search_dialog" ).dialog( "open" );
	});
	
	$$("#search_button").click(function() {
		console.log("search...")
		$$( "#search_pin_list" ).html( "" );
		$$.search_results = new Array()
		$$.get( "/admin/api/categories/$category.id/pins?search_terms=" + $$( "#search_terms" ).val(), function( data ) {
			if (data.length > 0) {
				data.forEach( function( pin ) {
					add_search_pin( pin );
					$$.search_results[pin['id']] = pin;
				});
			} else {
				$$( "#search_pin_list" ).html('No elements for this search')
			}
		});
	});
	
	function add_search_pin(pin) {
		$$( "#search_pin_list" ).append('<div id="search_pin' + pin['id'] + '" class="row"><div class="col-xs-9"><small>'
				+ pin['description'] + '</small><button id="addpin' + pin["id"] + '" pin="' + pin["id"] + '" class="btn add_pin_button">add</button>'
				+ '</div><div class="col-xs-3"><img src="asdf"/></div></div>');
	}

	$$( "#search_pin_list" ).on('click', ".add_pin_button", function() {
		pin_id = $$( this ).attr('pin');
		pin = $$.search_results[pin_id];
		add_searched_pin_to_cool(pin)
	});
	
	function add_searched_pin_to_cool( pin ) {
		$$.ajax({
			method: 'PUT',
			url: '/admin/api/categories/$category.id/cool_pins/' + pin['id'] + '/'
		}).done(function( data ) {
			add_to_pin_list( pin );
			remove_from_search_pin_list( pin );
		});
	}
	
	function remove_from_search_pin_list( pin ) {
		$$( "#search_pin" + pin['id'] ).remove();
	}
});
</script>
<div id="search_dialog" title="Search cool items">
	<input type="text" id="search_terms"/>
	<button id="search_button" class="btn">Search</button>
	<div id="search_pin_list" class="container-fluid"></div>
</div>