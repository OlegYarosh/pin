$def with (category, pins, prev, next)
<h2>
	Category: <strong>$category.name</strong>
</h2>
<div class="container-fluid">
	<div class="row">
		<div class="col-xs-10">
			<div class="container-fluid">
				<div class="row" id="items">
					<div class="col-xs-3" id="itemcol0"></div>
					<div class="col-xs-3" id="itemcol1"></div>
					<div class="col-xs-3" id="itemcol2"></div>
					<div class="col-xs-3" id="itemcol3"></div>
				</div>
			</div>
			<div class="container-fluid septop">
				<div class="row">
					<div class="col-xs-2"></div>
					<div class="col-xs-1"><a href="?offset=$prev" class="btn">Prev</a></div>
					<div class="col-xs-6"></div>
					<div class="col-xs-1"><a href="?offset=$next" class="btn">Next</a></div>
					<div class="col-xs-2"></div>
				</div>
			</div>
		</div>
		<div class="col-xs-2 sep">
			<h3>Cool pins</h3>
			<div id="cool-items"></div>
		</div>
	</div>
</div>
<style>
.small-text {
	font-size: 10px;
}
.pinimg {cursor:pointer;}
.sep {border-left: 1px solid black}
.septop {border-top: 1px solid black}
</style>
<script language="javascript">
$$(document).ready(function (){
	function pintemplate(pin) {
		return '<div id="pinbox' + pin.id + '"><img src="/static/tmp/' + pin.id + '.png" pinid="' + pin.id + '" class="pinimg img-responsive"/>' +
			'<div class="small-text">' + pin.description + '</div>' +
			'<div class="small-text" style="padding-bottom:2px;border-bottom:1px solid lightgray;margin-bottom:6px;"><a href="' + pin.link + '" title="' + pin.link + '">Link</a></div></div>'
	};
	
	$$.current_column = 0;
	function add_pin(pin) {
		template = pintemplate(pin);
		$$('#itemcol' + $$.current_column).append(template);
		$$.current_column += 1;
		if ($$.current_column % 4 == 0) {
			$$.current_column = 0;
		}
	};
	
	$$("#items").on('click', '.pinimg', function() {
		var pinid = $$(this).attr('pinid');
		$$.div_to_remove = $$('#pinbox' + pinid);
		$$.ajax({url: '/admin/api/categories/$category.id/cool_pins/' + pinid + '/',
				 method: 'PUT',
				 success: function(data) {
					$$.div_to_remove.remove();
					load_cool_pins();
				 }
		});
	});
	
	$$("#cool-items").on('click', '.remove', function() {
		var pinid = $$(this).attr('pinid');
		$$.div_to_remove = $$('#pinbox' + pinid);
		$$.ajax({url: '/admin/api/categories/$category.id/cool_pins/' + pinid + '/',
				 method: 'DELETE',
				 success: function(data) {
					$$.div_to_remove.remove();
					location.reload(true);
				 }
		});
	});
	
	function load_cool_pins() {
		$$.get('/admin/category-cool-items/$category.id/',
			function(data) {
				$$('#cool-items').html(data);
			});
	};
	load_cool_pins();

$for pin in pins:
	add_pin($:pin)
});
</script>